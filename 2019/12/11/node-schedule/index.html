<!DOCTYPE html><html lang="zh-CN"><head><meta name="generator" content="Hexo 3.9.0"><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="description" content="node-schedule定时任务"><meta name="keywords" content="Nest.js,入门实战-定时任务"><meta name="author" content="扫呗"><meta name="copyright" content="扫呗"><title>node-schedule定时任务 | 扫呗无线前端团队</title><link rel="shortcut icon" href="/blog/melody-favicon.ico"><link rel="stylesheet" href="/blog/css/index.css?version=1.6.1"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css?version=1.6.1"><link rel="dns-prefetch" href="https://cdn.staticfile.org"><link rel="dns-prefetch" href="https://cdn.bootcss.com"><link rel="dns-prefetch" href="https://creativecommons.org"><script>var GLOBAL_CONFIG = { 
  root: '/blog/',
  algolia: undefined,
  localSearch: undefined,
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  }
} </script></head><body><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true"></i><div id="sidebar"><div class="toggle-sidebar-info text-center"><span data-toggle="Toggle article">Toggle site</span><hr></div><div class="sidebar-toc"><div class="sidebar-toc__title">Catalog</div><div class="sidebar-toc__progress"><span class="progress-notice">You've read</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar"></div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#内容概要"><span class="toc-number">1.</span> <span class="toc-text">内容概要</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#开启一个定时任务"><span class="toc-number">2.</span> <span class="toc-text">开启一个定时任务</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#定时任务中的通配符解释"><span class="toc-number">3.</span> <span class="toc-text">定时任务中的通配符解释</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#范围触发"><span class="toc-number">4.</span> <span class="toc-text">范围触发</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#递归规则定时器"><span class="toc-number">5.</span> <span class="toc-text">递归规则定时器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#对象文本语法定时器"><span class="toc-number">6.</span> <span class="toc-text">对象文本语法定时器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#取消定时器"><span class="toc-number">7.</span> <span class="toc-text">取消定时器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#nestjs中使用定时器"><span class="toc-number">8.</span> <span class="toc-text">nestjs中使用定时器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#nest-schedule"><span class="toc-number">9.</span> <span class="toc-text">nest-schedule</span></a></li></ol></div></div><div class="author-info hide"><div class="author-info__avatar text-center"><img src="http://img.lcsw.cn/blog_avatar.jpg"></div><div class="author-info__name text-center">扫呗</div><div class="author-info__description text-center">让支付回归简单</div><hr><div class="author-info-articles"><a class="author-info-articles__archives article-meta" href="/blog/archives"><span class="pull-left">Articles</span><span class="pull-right">15</span></a><a class="author-info-articles__tags article-meta" href="/blog/tags"><span class="pull-left">Tags</span><span class="pull-right">13</span></a><a class="author-info-articles__categories article-meta" href="/blog/categories"><span class="pull-left">Categories</span><span class="pull-right">5</span></a></div><hr><div class="author-info-links"><div class="author-info-links__title text-center">友情链接</div><a class="author-info-links__name text-center" href="http://www.lcsw.cn">扫呗官网</a><a class="author-info-links__name text-center" href="https://75team.com/post/list">奇舞团博客</a><a class="author-info-links__name text-center" href="https://www.liaoxuefeng.com/">廖雪峰博客</a><a class="author-info-links__name text-center" href="https://fed.taobao.org/">淘宝FED</a><a class="author-info-links__name text-center" href="https://www.cnblogs.com/TomXu/archive/2011/12/15/2288411.html">汤姆大叔的博客</a><a class="author-info-links__name text-center" href="http://eux.baidu.com/">百度EUX</a><a class="author-info-links__name text-center" href="https://coolshell.cn/">酷壳</a><a class="author-info-links__name text-center" href="https://aotu.io/notes/">凹凸实验室</a></div></div></div><div id="content-outer"><div id="top-container" style="background-image: url(http://img.lcsw.cn/blog_banner.jpg)"><div id="page-header"><span class="pull-left"> <a id="site-name" href="/blog/">扫呗无线前端团队</a></span><i class="fa fa-bars toggle-menu pull-right" aria-hidden="true"></i><span class="pull-right menus"><a class="site-page" href="/blog/">首页</a><a class="site-page" href="/blog/categories/vue">Vue</a><a class="site-page" href="/blog/categories/nestjs">NestJs</a><a class="site-page" href="/blog/categories/angular">Angular</a><a class="site-page" href="/blog/categories/typescript">Typescript</a><a class="site-page" href="/blog/categories/小程序">小程序</a><a class="site-page" href="/blog/categories/源码解读">源码解读</a><a class="site-page" href="/blog/categories/项目总结">项目总结</a></span></div><div id="post-info"><div id="post-title">node-schedule定时任务</div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2019-12-11</time><span class="post-meta__separator">|</span><i class="fa fa-inbox post-meta__icon" aria-hidden="true"></i><a class="post-meta__categories" href="/blog/categories/nestjs/">nestjs</a></div></div></div><div class="layout" id="content-inner"><article id="post"><div class="article-container" id="post-content"><h3 id="内容概要"><a href="#内容概要" class="headerlink" title="内容概要"></a>内容概要</h3><ul>
<li>在实际开发项目中，会遇到很多定时任务的工作。比如：定时发送推送通知，定时更新某些数据等等<br>这是我们第一时间想到的就是可以写个定时器，来完成相应的需求，而在在node.js中可以使用node-schedule来完成定时任务<br>nestjs是一个node框架当然也可以使用node-schedule来完成定时任务。下面就用示例来说明一下node-schedule的用法.</li>
</ul>
<p>安装依赖<br>    npm install node-schedule</p>
<h3 id="开启一个定时任务"><a href="#开启一个定时任务" class="headerlink" title="开启一个定时任务"></a>开启一个定时任务</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> schedule = <span class="built_in">require</span>(<span class="string">'node-schedule'</span>);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">scheduleTask</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    schedule.scheduleJob(<span class="string">'30 * * * * *'</span>, ()=&gt;&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'scheduleTask:'</span> + <span class="keyword">new</span> <span class="built_in">Date</span>());</span><br><span class="line">    &#125;); </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">scheduleTask();</span><br><span class="line"><span class="comment">// schedule.scheduleJob的回调函数中写入要执行的任务代码，一个定时器就完成了！传入的'30 * * * * *'带来的结果是每分钟的30秒时都会执行</span></span><br></pre></td></tr></table></figure>

<h3 id="定时任务中的通配符解释"><a href="#定时任务中的通配符解释" class="headerlink" title="定时任务中的通配符解释"></a>定时任务中的通配符解释</h3><pre><code>* * * * * *
┬ ┬ ┬ ┬ ┬ ┬
│ │ │ │ │  |
│ │ │ │ │ └ day of week (0 - 7) (0 or 7 is Sun)
│ │ │ │ └───── month (1 - 12)
│ │ │ └────────── day of month (1 - 31)
│ │ └─────────────── hour (0 - 23)
│ └──────────────────── minute (0 - 59)
└───────────────────────── second (0 - 59, OPTIONAL)</code></pre><p>6个占位符从左到右分别代表：秒、分、时、日、月、周几</p>
<p>每分钟的第30秒触发： ‘30 * * * * *’</p>
<p>每小时的1分30秒触发 ：’30 1 * * * *’</p>
<p>每天的凌晨1点1分30秒触发 ：’30 1 1 * * *’</p>
<p>每月的1日1点1分30秒触发 ：’30 1 1 1 * *’</p>
<p>每年的1月1日1点1分30秒触发 ：’30 1 1 1 1 *’</p>
<p>每周1的1点1分30秒触发 ：’30 1 1 * * 1’</p>
<h3 id="范围触发"><a href="#范围触发" class="headerlink" title="范围触发"></a>范围触发</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> schedule = <span class="built_in">require</span>(<span class="string">'node-schedule'</span>);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">scheduleTask</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    schedule.scheduleJob(<span class="string">'1-10 * * * * *'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'scheduleTask:'</span> + <span class="keyword">new</span> <span class="built_in">Date</span>());</span><br><span class="line">    &#125;); </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">scheduleTask();</span><br><span class="line"><span class="comment">// 每分钟的1-10秒都会触发  其它占用符使用方法一样</span></span><br></pre></td></tr></table></figure>

<h3 id="递归规则定时器"><a href="#递归规则定时器" class="headerlink" title="递归规则定时器"></a>递归规则定时器</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> schedule = <span class="built_in">require</span>(<span class="string">'node-schedule'</span>);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">scheduleTask</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> rule = <span class="keyword">new</span> schedule.RecurrenceRule();</span><br><span class="line">    <span class="comment">// rule.dayOfWeek = 2;</span></span><br><span class="line">    <span class="comment">// rule.year = 2020; </span></span><br><span class="line">    <span class="comment">// rule.month = 3;</span></span><br><span class="line">    <span class="comment">// rule.dayOfMonth = 1;</span></span><br><span class="line">    <span class="comment">// rule.hour = 1;</span></span><br><span class="line">    <span class="comment">// rule.minute = 30;</span></span><br><span class="line">    rule.second = <span class="number">0</span>;</span><br><span class="line">    </span><br><span class="line">    schedule.scheduleJob(rule, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">       <span class="built_in">console</span>.log(<span class="string">'scheduleTask:'</span> + <span class="keyword">new</span> <span class="built_in">Date</span>());</span><br><span class="line">    &#125;);</span><br><span class="line">   </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">scheduleTask();</span><br><span class="line"><span class="comment">// 每分钟第60(0)秒时就会触发</span></span><br></pre></td></tr></table></figure>

<h3 id="对象文本语法定时器"><a href="#对象文本语法定时器" class="headerlink" title="对象文本语法定时器"></a>对象文本语法定时器</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> schedule = <span class="built_in">require</span>(<span class="string">'node-schedule'</span>);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">scheduleTask</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="comment">//dayOfWeek</span></span><br><span class="line">    <span class="comment">//month</span></span><br><span class="line">    <span class="comment">//dayOfMonth</span></span><br><span class="line">    <span class="comment">//hour</span></span><br><span class="line">    <span class="comment">//minute</span></span><br><span class="line">    <span class="comment">//second</span></span><br><span class="line">    schedule.scheduleJob(&#123;<span class="attr">hour</span>: <span class="number">17</span>, <span class="attr">minute</span>: <span class="number">0</span>, <span class="attr">dayOfWeek</span>: <span class="number">5</span>&#125;, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'scheduleTask:'</span> + <span class="keyword">new</span> <span class="built_in">Date</span>());</span><br><span class="line">    &#125;);</span><br><span class="line">   </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">scheduleTask();</span><br><span class="line"><span class="comment">// 每周五的下午17：00分触发</span></span><br></pre></td></tr></table></figure>

<h3 id="取消定时器"><a href="#取消定时器" class="headerlink" title="取消定时器"></a>取消定时器</h3><p>调用定时器对象的cancl方法即可</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> schedule = <span class="built_in">require</span>(<span class="string">'node-schedule'</span>);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">scheduleCancel</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> counter = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">const</span> j = schedule.scheduleJob(<span class="string">'* * * * * *'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        </span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'定时器触发次数：'</span> + counter);</span><br><span class="line">        counter++;</span><br><span class="line">        </span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'定时器取消'</span>)</span><br><span class="line">        j.cancel();   </span><br><span class="line">    &#125;, <span class="number">5000</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">scheduleCancel();</span><br><span class="line"><span class="comment">// 5000ms后取消则触发五次后将会取消</span></span><br></pre></td></tr></table></figure>

<h3 id="nestjs中使用定时器"><a href="#nestjs中使用定时器" class="headerlink" title="nestjs中使用定时器"></a>nestjs中使用定时器</h3><p>这里有这样一个需求，每周五的下午6点定时更新数据库中某些字段；<br>这里我们就可以实现一个接口用来更新数据库表字段，而关键就在于每周五的下午6点去更新，这时我们就可以启一个定时任务，定时调用接口达到定时更新的目的。<br>例如：<br>有接口 <a href="http://localhost:3000/photo/updateStatus" target="_blank" rel="noopener">http://localhost:3000/photo/updateStatus</a> 定时将数据库中数据删除(不建议删库，一般设置字段表示数据状态，更新该字段为指定值表示删除状态)</p>
<p>在main.ts引入并使用</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; Logger &#125; <span class="keyword">from</span> <span class="string">'@nestjs/common'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; NestFactory, FastifyAdapter &#125; <span class="keyword">from</span> <span class="string">'@nestjs/core'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; AppModule &#125; <span class="keyword">from</span> <span class="string">'./app.module'</span>;</span><br><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> cors <span class="keyword">from</span> <span class="string">'cors'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; join &#125; <span class="keyword">from</span> <span class="string">'path'</span>;</span><br><span class="line"><span class="keyword">import</span> fly <span class="keyword">from</span> <span class="string">'flyio'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// tslint:disable-next-line:no-var-requires</span></span><br><span class="line"><span class="keyword">const</span> schedule = <span class="built_in">require</span>(<span class="string">'node-schedule'</span>);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">scheduleTask</span>(<span class="params"></span>) </span>&#123; <span class="comment">// 定时任务</span></span><br><span class="line">    <span class="keyword">const</span> timing = schedule.scheduleJob(<span class="string">'0 0 0 * * *'</span>, <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">        Logger.log(<span class="string">'定时任务'</span>);</span><br><span class="line">        fly.get(<span class="string">'http://localhost:3000/photo/updateStatus'</span>).then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">            Logger.log(<span class="built_in">JSON</span>.stringify(res.data));</span><br><span class="line">        &#125;).catch(<span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">            Logger.log(<span class="built_in">JSON</span>.stringify(err));</span><br><span class="line">        &#125;); <span class="comment">// 定时任务更改数据</span></span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line">scheduleTask(); <span class="comment">// 开启定时任务</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">bootstrap</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> app = <span class="keyword">await</span> NestFactory.create(AppModule);</span><br><span class="line">    app.useStaticAssets(join(__dirname, <span class="string">'..'</span>, <span class="string">'public'</span>));</span><br><span class="line">    app.use(</span><br><span class="line">        cors(&#123;</span><br><span class="line">            credentials: <span class="literal">true</span>,</span><br><span class="line">        &#125;),</span><br><span class="line">    );</span><br><span class="line">    <span class="keyword">await</span> app.listen(<span class="number">3000</span>);</span><br><span class="line">&#125;</span><br><span class="line">bootstrap();</span><br></pre></td></tr></table></figure>

<h3 id="nest-schedule"><a href="#nest-schedule" class="headerlink" title="nest-schedule"></a>nest-schedule</h3><p><a href="http://npm.taobao.org/package/nest-schedule" target="_blank" rel="noopener">nest-schedule</a>是一个基于node-schedule实现的用于nest.js的任务库<br>…还未尝试使用</p>
</div></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">Author: </span><span class="post-copyright-info"><a href="mailto:undefined">扫呗</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">Link: </span><span class="post-copyright-info"><a href="https://saobei.github.io/2019/12/11/node-schedule/">https://saobei.github.io/2019/12/11/node-schedule/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">Copyright Notice: </span><span class="post-copyright-info">All articles in this blog are licensed under <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="post-meta__tag-list"><a class="post-meta__tags" href="/blog/tags/Nest-js/">Nest.js</a><a class="post-meta__tags" href="/blog/tags/入门实战-定时任务/">入门实战-定时任务</a></div><nav id="pagination"><div class="prev-post pull-left"><a href="/blog/2020/03/09/angular/"><i class="fa fa-chevron-left">  </i><span>angular相关知识分享</span></a></div><div class="next-post pull-right"><a href="/blog/2019/12/10/nest-one/"><span>Nest.js项目入门实战(一)</span><i class="fa fa-chevron-right"></i></a></div></nav><div id="lv-container" data-id="city" data-uid="MTAyMC80NzI0MS8yMzc0MQ=="><script>(function(d, s) {
    var j, e = d.getElementsByTagName(s)[0];
    if (typeof LivereTower === 'function') { return; }
    j = d.createElement(s);
    j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
    j.async = true;
    e.parentNode.insertBefore(j, e);
})(document, 'script');</script></div></div></div><footer class="footer-bg" style="background-image: url(http://img.lcsw.cn/blog_banner.jpg)"><div class="layout" id="footer"><div class="copyright">&copy;2019 - 2022 By 扫呗</div><div class="framework-info"><span>Driven - </span><a href="http://hexo.io"><span>Hexo</span></a><span class="footer-separator">|</span><span>Theme - </span><a href="https://github.com/Molunerfinn/hexo-theme-melody"><span>Melody</span></a></div></div></footer><i class="fa fa-arrow-up" id="go-up" aria-hidden="true"></i><script src="https://cdn.jsdelivr.net/npm/animejs@latest/anime.min.js"></script><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@latest/velocity.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-ui-pack@latest/velocity.ui.min.js"></script><script src="/blog/js/utils.js?version=1.6.1"></script><script src="/blog/js/fancybox.js?version=1.6.1"></script><script src="/blog/js/sidebar.js?version=1.6.1"></script><script src="/blog/js/copy.js?version=1.6.1"></script><script src="/blog/js/fireworks.js?version=1.6.1"></script><script src="/blog/js/transition.js?version=1.6.1"></script><script src="/blog/js/scroll.js?version=1.6.1"></script><script src="/blog/js/head.js?version=1.6.1"></script><script>if(/Android|webOS|iPhone|iPod|BlackBerry/i.test(navigator.userAgent)) {
  $('#nav').addClass('is-mobile')
  $('footer').addClass('is-mobile')
}</script></body></html>