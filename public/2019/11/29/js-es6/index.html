<!DOCTYPE html><html lang="zh-CN"><head><meta name="generator" content="Hexo 3.9.0"><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="description" content="es6内容解读"><meta name="keywords" content="js"><meta name="author" content="扫呗"><meta name="copyright" content="扫呗"><title>es6内容解读 | 扫呗无线前端团队</title><link rel="shortcut icon" href="/blog/melody-favicon.ico"><link rel="stylesheet" href="/blog/css/index.css?version=1.6.1"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css?version=1.6.1"><link rel="dns-prefetch" href="https://cdn.staticfile.org"><link rel="dns-prefetch" href="https://cdn.bootcss.com"><link rel="dns-prefetch" href="https://creativecommons.org"><script>var GLOBAL_CONFIG = { 
  root: '/blog/',
  algolia: undefined,
  localSearch: undefined,
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  }
} </script></head><body><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true"></i><div id="sidebar"><div class="toggle-sidebar-info text-center"><span data-toggle="Toggle article">Toggle site</span><hr></div><div class="sidebar-toc"><div class="sidebar-toc__title">Catalog</div><div class="sidebar-toc__progress"><span class="progress-notice">You've read</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar"></div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#赋值解构"><span class="toc-number">1.</span> <span class="toc-text">赋值解构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Generator生成器"><span class="toc-number">2.</span> <span class="toc-text">Generator生成器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#监听对象属性变化"><span class="toc-number">3.</span> <span class="toc-text">监听对象属性变化</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#async-await的用法"><span class="toc-number">4.</span> <span class="toc-text">async await的用法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#call、apply、bind的区别"><span class="toc-number">5.</span> <span class="toc-text">call、apply、bind的区别</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#for…in和for…of"><span class="toc-number">6.</span> <span class="toc-text">for…in和for…of</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#面向对象Class"><span class="toc-number">7.</span> <span class="toc-text">面向对象Class</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#构造函数"><span class="toc-number">7.0.1.</span> <span class="toc-text">构造函数</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Class"><span class="toc-number">7.0.2.</span> <span class="toc-text">Class</span></a></li></ol></li></ol></div></div><div class="author-info hide"><div class="author-info__avatar text-center"><img src="http://img.lcsw.cn/blog_avatar.jpg"></div><div class="author-info__name text-center">扫呗</div><div class="author-info__description text-center">让支付回归简单</div><hr><div class="author-info-articles"><a class="author-info-articles__archives article-meta" href="/blog/archives"><span class="pull-left">Articles</span><span class="pull-right">12</span></a><a class="author-info-articles__tags article-meta" href="/blog/tags"><span class="pull-left">Tags</span><span class="pull-right">12</span></a><a class="author-info-articles__categories article-meta" href="/blog/categories"><span class="pull-left">Categories</span><span class="pull-right">5</span></a></div><hr><div class="author-info-links"><div class="author-info-links__title text-center">友情链接</div><a class="author-info-links__name text-center" href="http://www.lcsw.cn">扫呗官网</a><a class="author-info-links__name text-center" href="https://75team.com/post/list">奇舞团博客</a><a class="author-info-links__name text-center" href="https://www.liaoxuefeng.com/">廖雪峰博客</a><a class="author-info-links__name text-center" href="https://fed.taobao.org/">淘宝FED</a><a class="author-info-links__name text-center" href="https://www.cnblogs.com/TomXu/archive/2011/12/15/2288411.html">汤姆大叔的博客</a><a class="author-info-links__name text-center" href="http://eux.baidu.com/">百度EUX</a><a class="author-info-links__name text-center" href="https://coolshell.cn/">酷壳</a><a class="author-info-links__name text-center" href="https://aotu.io/notes/">凹凸实验室</a></div></div></div><div id="content-outer"><div id="top-container" style="background-image: url(http://img.lcsw.cn/blog_banner.jpg)"><div id="page-header"><span class="pull-left"> <a id="site-name" href="/blog/">扫呗无线前端团队</a></span><i class="fa fa-bars toggle-menu pull-right" aria-hidden="true"></i><span class="pull-right menus"><a class="site-page" href="/blog/">首页</a><a class="site-page" href="/blog/categories/vue">Vue</a><a class="site-page" href="/blog/categories/nestjs">NestJs</a><a class="site-page" href="/blog/categories/angular">Angular</a><a class="site-page" href="/blog/categories/typescript">Typescript</a><a class="site-page" href="/blog/categories/小程序">小程序</a><a class="site-page" href="/blog/categories/源码解读">源码解读</a><a class="site-page" href="/blog/categories/项目总结">项目总结</a></span></div><div id="post-info"><div id="post-title">es6内容解读</div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2019-11-29</time><span class="post-meta__separator">|</span><i class="fa fa-inbox post-meta__icon" aria-hidden="true"></i><a class="post-meta__categories" href="/blog/categories/项目总结/">项目总结</a></div></div></div><div class="layout" id="content-inner"><article id="post"><div class="article-container" id="post-content"><h3 id="赋值解构"><a href="#赋值解构" class="headerlink" title="赋值解构"></a>赋值解构</h3><ul>
<li>赋值解构使得声明变量更简洁。特点是左边多个变量，右边是一个对象或数组。</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 解构出对象的属性</span></span><br><span class="line"><span class="keyword">let</span> aa = &#123;<span class="attr">b</span>: <span class="string">'11'</span>, <span class="attr">c</span>:<span class="string">'22'</span>&#125;;</span><br><span class="line"><span class="keyword">let</span> &#123;b,c&#125; = aa;</span><br><span class="line"><span class="built_in">console</span>.log(b,c);	<span class="comment">// 11 22</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 解构出对象的属性并重新取名</span></span><br><span class="line"><span class="keyword">let</span> a = &#123;<span class="attr">b</span>: <span class="string">'11'</span>, <span class="attr">c</span>:<span class="string">'22'</span>&#125;;</span><br><span class="line"><span class="keyword">let</span> &#123;<span class="attr">b</span>: bb,<span class="attr">c</span>: cc&#125; = aa;</span><br><span class="line"><span class="built_in">console</span>.log(bb,cc);	<span class="comment">// 11 22</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 解构数组</span></span><br><span class="line"><span class="keyword">let</span> [a, b] = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line"><span class="built_in">console</span>.log(a,b);	<span class="comment">// 1 2</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 解构时给变量默认值</span></span><br><span class="line">[a=<span class="number">5</span>, b=<span class="number">7</span>] = [<span class="number">1</span>];</span><br><span class="line"><span class="built_in">console</span>.log(a,b);	<span class="comment">// 1 7</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 解构 rest的使用。...能解构剩余属性值</span></span><br><span class="line">[a, b, ...rest] = [<span class="number">10</span>, <span class="number">20</span>, <span class="number">30</span>, <span class="number">40</span>, <span class="number">50</span>];</span><br><span class="line"><span class="built_in">console</span>.log(a,b,rest);	<span class="comment">// 10 20 [30, 40, 50]</span></span><br><span class="line">(&#123;a, b, ...rest&#125; = &#123;<span class="attr">a</span>: <span class="number">10</span>, <span class="attr">b</span>: <span class="number">20</span>, <span class="attr">c</span>: <span class="number">30</span>, <span class="attr">d</span>: <span class="number">40</span>&#125;);</span><br><span class="line"><span class="built_in">console</span>.log(a,b,rest);	<span class="comment">// 10 20 &#123;c: 30, d: 40&#125;</span></span><br></pre></td></tr></table></figure>

<h3 id="Generator生成器"><a href="#Generator生成器" class="headerlink" title="Generator生成器"></a>Generator生成器</h3><ul>
<li>可以理解为一个状态机，封装了多个内部状态，每次调用就遍历并执行一个状态。这样就可以使得多个函数共同配合完成某个任务。</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">helloWorldGenerator</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">yield</span> <span class="string">'hello'</span>;	</span><br><span class="line">  <span class="keyword">yield</span> <span class="string">'world'</span>;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">'ending'</span>;	<span class="comment">// 以return作为结束执行的标志</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> hw = helloWorldGenerator();</span><br><span class="line">hw.next();	<span class="comment">// 执行后的数据为一个对象：&#123; value: 'hello', done: false &#125;</span></span><br><span class="line">hw.next();	<span class="comment">// &#123; value: 'world', done: false &#125;</span></span><br><span class="line">hw.next();	<span class="comment">// &#123; value: 'ending', done: true &#125;</span></span><br><span class="line">hw.next();	<span class="comment">// &#123; value: undefined, done: true &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 也可以直接return 不必一直调用next() </span></span><br><span class="line">hw.return(<span class="string">'aaa'</span>);	<span class="comment">// &#123; value: 'aaa', done: true &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// yield* fn() 这种用法表示generator的嵌套执行</span></span><br></pre></td></tr></table></figure>

<ul>
<li>Generator可以作为一个暂缓执行函数</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">f</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'执行了！'</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> generator = f();	<span class="comment">// 如果这里的f()是普通函数，那么这里就执行了f()里面的内容</span></span><br><span class="line"></span><br><span class="line">setTimeout(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  generator.next()</span><br><span class="line">&#125;, <span class="number">2000</span>);</span><br></pre></td></tr></table></figure>

<ul>
<li><p>Generator有3个方法 next()  throw()  return()。它们将yield替换成值、throw语句、return语句。next里面传值时会被当做上一个yield的值</p>
</li>
<li><p>Generator轻松遍历所以数组成员</p>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">iterTree</span>(<span class="params">tree</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="built_in">Array</span>.isArray(tree)) &#123;	<span class="comment">// 如果是Array</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> i=<span class="number">0</span>; i &lt; tree.length; i++) &#123;</span><br><span class="line">      <span class="keyword">yield</span>* iterTree(tree[i]);	<span class="comment">// 将Array的每一项当参数继续传入函数执行</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;	<span class="comment">// 否则直接返回</span></span><br><span class="line">    <span class="keyword">yield</span> tree;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> tree = [ <span class="string">'a'</span>, [[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>],<span class="string">'b'</span>, <span class="string">'c'</span>]];</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> x <span class="keyword">of</span> iterTree(tree)) &#123;	<span class="comment">// for of 能循环执行yield</span></span><br><span class="line">  <span class="built_in">console</span>.log(x);	<span class="comment">// a 1 2 3 b c</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>Generator实现协程。A B两个方法交替执行完成同一个任务</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// A函数</span></span><br><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">A</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"1"</span>);</span><br><span class="line">  <span class="keyword">yield</span> <span class="string">"B"</span>;<span class="comment">//交由B处理</span></span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"11"</span>);</span><br><span class="line">  <span class="keyword">yield</span> <span class="string">"B"</span>;<span class="comment">//交由B处理</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// B函数</span></span><br><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">B</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">   <span class="built_in">console</span>.log(<span class="string">"2"</span>);</span><br><span class="line">   <span class="keyword">yield</span> <span class="string">"A"</span>;<span class="comment">//交由A处理</span></span><br><span class="line">   <span class="built_in">console</span>.log(<span class="string">"22"</span>);</span><br><span class="line">   <span class="keyword">yield</span> <span class="string">"A"</span>;<span class="comment">//交由A处理</span></span><br><span class="line">   <span class="built_in">console</span>.log(<span class="string">"222"</span>);<span class="comment">//上菜</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> fnA = A();</span><br><span class="line"><span class="keyword">var</span> fnB = B();</span><br><span class="line"><span class="comment">//流程控制</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">run</span>(<span class="params">fn</span>)</span>&#123;</span><br><span class="line">   <span class="keyword">var</span> v = fn.next();</span><br><span class="line">   <span class="keyword">if</span>(v.value ==<span class="string">"A"</span>)&#123;</span><br><span class="line">      run(fnA);	<span class="comment">// 当函数返回值是A 再次进入run 达到循环调用的目的</span></span><br><span class="line">   &#125;<span class="keyword">else</span> <span class="keyword">if</span>(v.value ==<span class="string">"B"</span>)&#123;</span><br><span class="line">      run(fnB);</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line">run(fnB);<span class="comment">//开始执行 2 1 22 11 222</span></span><br></pre></td></tr></table></figure>

<ul>
<li>生成器本身带有Symbol.iterator。Symbol：唯一标识id，iterator：生成器</li>
</ul>
<h3 id="监听对象属性变化"><a href="#监听对象属性变化" class="headerlink" title="监听对象属性变化"></a>监听对象属性变化</h3><ul>
<li><strong>Object.defineProperty</strong>通过监听对象属性的读取和修改触发函数执行业务代码</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"> <span class="keyword">let</span> obj = &#123;</span><br><span class="line">    _hello:<span class="string">'hello world'</span> <span class="comment">//表示私有变量</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">Object</span>.defineProperty(obj,<span class="string">'hello'</span>,&#123;</span><br><span class="line">    <span class="keyword">get</span>() &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'get'</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>._hello;	<span class="comment">// 这里会返回一个值修改obj的hello属性</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="keyword">set</span>:function (value) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'set'</span>);</span><br><span class="line">        <span class="keyword">this</span>._hello = value; <span class="comment">// 使得obj的私有属性_hello与hello属性保持一致</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">console</span>.log(obj.hello);</span><br><span class="line">obj.hello = <span class="string">'goodbye'</span>;</span><br><span class="line"><span class="built_in">console</span>.log(obj.hello);</span><br></pre></td></tr></table></figure>

<ul>
<li>代理<strong>Proxy</strong>类似于defineProperty的加强版</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> obj = &#123;</span><br><span class="line">     hello:<span class="string">'hello world'</span></span><br><span class="line"> &#125;;</span><br><span class="line"><span class="keyword">let</span> proxy = <span class="keyword">new</span> <span class="built_in">Proxy</span>(obj, &#123;</span><br><span class="line">    <span class="keyword">get</span>(target, property) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'get'</span>);</span><br><span class="line">        <span class="keyword">return</span> target[property];</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="keyword">set</span>(target,property,value) &#123; <span class="comment">// target当前对象 property属性 value修改的属性值</span></span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'set'</span>);</span><br><span class="line">        target[property] = value;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">console</span>.log(proxy.hello);</span><br><span class="line">proxy.hello = <span class="string">'goodbye'</span>;</span><br><span class="line"><span class="built_in">console</span>.log(proxy.hello);</span><br></pre></td></tr></table></figure>

<h3 id="async-await的用法"><a href="#async-await的用法" class="headerlink" title="async await的用法"></a>async await的用法</h3><p>async和await配合使用常用来解决回调地狱的问题，可以使代码更简洁</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">takeLongTime</span>(<span class="params"></span>) </span>&#123;	<span class="comment">// 返回一个promise对象</span></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="params">resolve</span> =&gt;</span> &#123;</span><br><span class="line">        setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> resolve(<span class="string">"long_time_value"</span>), <span class="number">1000</span>);<span class="comment">//这里用定时器模拟异步操作</span></span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params"></span>) </span>&#123;		<span class="comment">// async申明的函数本质上是一个promise对象</span></span><br><span class="line">    <span class="keyword">const</span> v = <span class="keyword">await</span> takeLongTime();</span><br><span class="line">    <span class="built_in">console</span>.log(v);	<span class="comment">// 只有等待takeLongTime()执行完才打印信息，在此函数体内就把异步操作变同步了</span></span><br><span class="line">&#125;</span><br><span class="line">test();</span><br></pre></td></tr></table></figure>

<p>异步操作结束-&gt;通知到resolve()函数-&gt;通知到await可以执行下面代码了。用generate生成器也可以做到这一点。</p>
<h3 id="call、apply、bind的区别"><a href="#call、apply、bind的区别" class="headerlink" title="call、apply、bind的区别"></a>call、apply、bind的区别</h3><p>每个函数都包含这3个方法，它们能修改this的指向</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = &#123;</span><br><span class="line">    user:<span class="string">"Ice"</span>,</span><br><span class="line">    fn:<span class="function"><span class="keyword">function</span>(<span class="params">e,ee</span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="keyword">this</span>.user); <span class="comment">//Ice</span></span><br><span class="line">		<span class="built_in">console</span>.log(e+ee);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> b = a.fn; <span class="comment">// 申明变量b继承变量a的一个方法</span></span><br><span class="line">b(<span class="number">1</span>, <span class="number">2</span>);  <span class="comment">// underfined NaN b继承了a的方法但是它的this指向的是全局变量</span></span><br><span class="line">b.call(a,<span class="number">1</span>,<span class="number">2</span>); <span class="comment">// call使b的this指向了a</span></span><br><span class="line">b.apply(a,[<span class="number">1</span>,<span class="number">2</span>]); <span class="comment">// 同上，区别在于传参不同</span></span><br><span class="line">b.bind(a);	<span class="comment">// 这里 bind返回了一个新的函数，这里并不会立即执行</span></span><br></pre></td></tr></table></figure>

<h3 id="for…in和for…of"><a href="#for…in和for…of" class="headerlink" title="for…in和for…of"></a>for…in和for…of</h3><p>for循环相比于用api循环的优点在于可以主动用break结束循环，用return结束函数。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// for in遍历对象</span></span><br><span class="line"><span class="keyword">var</span> obj = &#123;<span class="attr">a</span>:<span class="number">1</span>, <span class="attr">b</span>:<span class="number">2</span>, <span class="attr">c</span>:<span class="number">3</span>&#125;;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> prop <span class="keyword">in</span> obj) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(prop);	<span class="comment">// a b c</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// for in遍历数组</span></span><br><span class="line"><span class="keyword">var</span> obj = [<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>];</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> prop <span class="keyword">in</span> obj) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(prop);	<span class="comment">// ‘0’ ‘1’ ‘2’ 由此可见for in会自动添加下标</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//for of遍历数组、字符串、Set、Map等</span></span><br><span class="line"><span class="keyword">var</span> a = [&#123;<span class="attr">a</span>:<span class="number">1</span>&#125;, &#123;<span class="attr">b</span>:<span class="number">2</span>&#125;, &#123;<span class="attr">c</span>:<span class="number">3</span>&#125;];</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> val <span class="keyword">of</span> a) &#123;</span><br><span class="line">	<span class="built_in">console</span>.log(val);	<span class="comment">// &#123;a:1&#125; &#123;b:2&#125; &#123;c:3&#125; 遍历出值</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>for…of其实隐式调用了Iterator方法（不断调用iterator.next()）</p>
<p>执行效率：常规for循环 &gt; forEach &gt; for…of  &gt;  map &gt;  for…in</p>
<h3 id="面向对象Class"><a href="#面向对象Class" class="headerlink" title="面向对象Class"></a>面向对象Class</h3><ol>
<li><h5 id="构造函数"><a href="#构造函数" class="headerlink" title="构造函数"></a>构造函数</h5><ul>
<li><p>构造函数其实就是一个普通的函数。</p>
</li>
<li><p>构造函数的写法：函数体内用this声明一些共有属性，用.prototype来申明共有方法，用new 构造函数()创建一个对象继承构造函数的属性和方法。通过原型的继承，它节约了内存。</p>
</li>
<li><p>js创建对象时都有一个_proto_的内置属性，它指向了构造函数的prototype。构造函数.prototype.constructor又指向构造函数本身</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> person = <span class="function"><span class="keyword">function</span>(<span class="params">name</span>)</span>&#123;</span><br><span class="line">   <span class="keyword">this</span>.name = name</span><br><span class="line"> &#125;;</span><br><span class="line">person.prototype.getName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">     <span class="built_in">console</span>.log(<span class="string">'名字是:'</span>+<span class="keyword">this</span>.name); </span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> aa = <span class="keyword">new</span> person(<span class="string">'cat'</span>);</span><br><span class="line"><span class="keyword">var</span> bb = <span class="keyword">new</span> person(<span class="string">'dog'</span>)</span><br><span class="line">aa.getName(); 	<span class="comment">//名字是:cat</span></span><br><span class="line">bb.getName();	<span class="comment">//名字是:dog</span></span><br><span class="line"><span class="built_in">console</span>.log(aa.__proto__ === person.prototype);  <span class="comment">//true</span></span><br><span class="line"><span class="built_in">console</span>.log(person.prototype.constructor === person);  <span class="comment">//true</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><h5 id="Class"><a href="#Class" class="headerlink" title="Class"></a>Class</h5><ul>
<li>用class改造上面的构造函数。实例化一个对象的时候constructor里面的内容会执行一遍。</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">person</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>(name) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'constructor执行了'</span>);</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">    getName() &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'名字是:'</span>+<span class="keyword">this</span>.name);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> a = <span class="keyword">new</span> person(<span class="string">'cat'</span>);</span><br><span class="line"><span class="keyword">var</span> b = <span class="keyword">new</span> person(<span class="string">'dog'</span>);</span><br><span class="line">a.getName();  <span class="comment">//名字是:cat</span></span><br><span class="line">b.getName();  <span class="comment">//名字是:dog</span></span><br></pre></td></tr></table></figure>

<ul>
<li><p>class可以通过extends来继承，constructor内使用super()调用父类的构造方法</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">personA</span> <span class="keyword">extends</span> <span class="title">person</span> </span>&#123;</span><br><span class="line">	<span class="keyword">constructor</span>(name, food) &#123;</span><br><span class="line">		<span class="keyword">super</span>(name);</span><br><span class="line">		<span class="keyword">this</span>.food = food;</span><br><span class="line">	&#125;</span><br><span class="line">	myfood() &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'吃东西：'</span>+<span class="keyword">this</span>.food)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> a = <span class="keyword">new</span> personA(<span class="string">'cat'</span>, <span class="string">'apple'</span>);</span><br><span class="line">a.myfood();</span><br><span class="line">a.getName();</span><br></pre></td></tr></table></figure>

</li>
</ul>
</li>
</ol>
</div></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">Author: </span><span class="post-copyright-info"><a href="mailto:undefined">扫呗</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">Link: </span><span class="post-copyright-info"><a href="https://saobei.github.io/2019/11/29/js-es6/">https://saobei.github.io/2019/11/29/js-es6/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">Copyright Notice: </span><span class="post-copyright-info">All articles in this blog are licensed under <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="post-meta__tag-list"><a class="post-meta__tags" href="/blog/tags/js/">js</a></div><nav id="pagination"><div class="prev-post pull-left"><a href="/blog/2019/12/10/js-abbreviation/"><i class="fa fa-chevron-left">  </i><span>js的一些常用简写操作</span></a></div><div class="next-post pull-right"><a href="/blog/2019/10/10/typescript-practice/"><span>Typescript 最佳实践</span><i class="fa fa-chevron-right"></i></a></div></nav><div id="lv-container" data-id="city" data-uid="MTAyMC80NzI0MS8yMzc0MQ=="><script>(function(d, s) {
    var j, e = d.getElementsByTagName(s)[0];
    if (typeof LivereTower === 'function') { return; }
    j = d.createElement(s);
    j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
    j.async = true;
    e.parentNode.insertBefore(j, e);
})(document, 'script');</script></div></div></div><footer class="footer-bg" style="background-image: url(http://img.lcsw.cn/blog_banner.jpg)"><div class="layout" id="footer"><div class="copyright">&copy;2019 - 2020 By 扫呗</div><div class="framework-info"><span>Driven - </span><a href="http://hexo.io"><span>Hexo</span></a><span class="footer-separator">|</span><span>Theme - </span><a href="https://github.com/Molunerfinn/hexo-theme-melody"><span>Melody</span></a></div></div></footer><i class="fa fa-arrow-up" id="go-up" aria-hidden="true"></i><script src="https://cdn.jsdelivr.net/npm/animejs@latest/anime.min.js"></script><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@latest/velocity.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-ui-pack@latest/velocity.ui.min.js"></script><script src="/blog/js/utils.js?version=1.6.1"></script><script src="/blog/js/fancybox.js?version=1.6.1"></script><script src="/blog/js/sidebar.js?version=1.6.1"></script><script src="/blog/js/copy.js?version=1.6.1"></script><script src="/blog/js/fireworks.js?version=1.6.1"></script><script src="/blog/js/transition.js?version=1.6.1"></script><script src="/blog/js/scroll.js?version=1.6.1"></script><script src="/blog/js/head.js?version=1.6.1"></script><script>if(/Android|webOS|iPhone|iPod|BlackBerry/i.test(navigator.userAgent)) {
  $('#nav').addClass('is-mobile')
  $('footer').addClass('is-mobile')
}</script></body></html>